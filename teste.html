<html lang='en'>
<head>
  <title>EasyFood Print Test</title>
  <script>
    function printMessage(){
      window.webkit.messageHandlers.efPrint.postMessage("testing");

      var message = {"name":"Roberto", "lunch":"Misto"}
      window.webkit.messageHandlers.efPrint.postMessage(message)
    }
    
    function printMessage2(){
      //var message = {"name":"Roberto", "lunch":"Misto"}
      //window.webkit.messageHandlers.efPrint.postMessage(message)
      
        var isiPad = navigator.userAgent.match(/iPad/i) !== null;
        if(isiPad) {
            var message = {
                "name": "info.student.name",
                "date": "_DD_MM_YYYY()",
                "balance": "_money(info.newBalance)",
                "mealName": "$mealName",
                "mealValue": "$mealValue"
            };

            window.webkit.messageHandlers.efPrint.postMessage(message);
        }
    }
    
    function isiPad() {
      var isiPad = navigator.userAgent.match(/iPad/i) != null;
      
      // For use within iPad developer UIWebView
      // Thanks to Andrew Hedges!
      var ua = navigator.userAgent;
      var isiPad2 = /iPad/i.test(ua);
      
      document.getElementById('isAnIPad').value='iPad='+(isiPad?'true':'false')+'iPad2='+(isiPad2?'true':'false');
    }
  </script>
</head>
<body>
  <p><br/><br/>Tests:</p>
  <p><a href='dpp355://print?title=MyTicket&code=A321EFSD'>URL Scheme</a></p>
  <p><a href='print://params?title=MyTicket&code=A321EFSD'>WebView</a></p>
  <p><a href='javascript:printMessage();'>Print</a></p>
  <p><a href='javascript:printMessage2();'>Print2</a></p>
  <p><a href='javascript:isiPad();'>Check user agent</a></p>
  <p><input type="text" id="isAnIPad" name="isAnIPad"/></p>
</body>
</html>
